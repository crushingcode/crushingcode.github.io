<!DOCTYPE html>
<html lang="en-us">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  	<meta property="og:title" content=" Do you like to ADB? &middot;  Crushing C.O.D.E" />
  	<meta property="og:site_name" content="Crushing C.O.D.E" />
  	<meta property="og:url" content="http://crushingcode.github.io/do-you-like-to-adb/" />

    
  	<meta property="og:type" content="article" />

    <meta property="og:article:published_time" content="2016-10-14T10:54:24&#43;02:00" />

    
    <meta property="og:article:tag" content="android" />
    
    <meta property="og:article:tag" content="tools" />
    
    <meta property="og:article:tag" content="apk" />
    
    <meta property="og:article:tag" content="adb" />
    
    <meta property="og:article:tag" content="information" />
    
    

  <title>
     Do you like to ADB? &middot;  Crushing C.O.D.E
  </title>

    <meta name="description" content="43 72 75 73 68 69 6e 67 20 43 2e 4f 2e 44 2e 45" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="http://crushingcode.github.io/images/favicon.ico">
	  <link rel="apple-touch-icon" href="http://crushingcode.github.io/images/apple-touch-icon.png" />

    <link rel="stylesheet" type="text/css" href="http://crushingcode.github.io/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="http://crushingcode.github.io/css/nav.css" />
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:400,700" />


    
      
          <link href="http://crushingcode.github.io/index.xml" rel="alternate" type="application/rss+xml" title="Crushing C.O.D.E" />
      
      
    
    <meta name="generator" content="Hugo 0.18.1" />

    <link rel="canonical" href="http://crushingcode.github.io/do-you-like-to-adb/" />

    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-53824796-3', 'auto');
      ga('send', 'pageview');

    </script>
    

    
</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        

        
            
            <li class="nav-opened" role="presentation">
              <a href="http://crushingcode.github.io/">Home</a>
            </li>
        
            <b>Follow me üöÄ<b>
            <li class="nav-opened" role="presentation">
              <a href="https://github.com/nisrulz">Github</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
              <a href="https://twitter.com/nisrulz">Twitter</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
              <a href="https://dribbble.com/nisrulz">Dribbble</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
              <a href="http://stackoverflow.com/users/2745762/radix">Stackoverflow</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
              <a href="https://slides.com/nisrulz">Slides</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
              <a href="https://www.behance.net/nisrulz">Behance</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
              <a href="https://codepen.io/nisrulz/">Codepen</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
              <a href="https://www.quora.com/profile/Nishant-Rulez">Quora</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
              <a href="https://speakerdeck.com/nisrulz">SpeakerDeck</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
              <a href="https://android-arsenal.com/user/nisrulz">Android Arsenal</a>
            </li>
        
            <b>Like my work? ‚ò∫Ô∏è</b>
            <li class="nav-opened" role="presentation">
              <a href="https://www.paypal.me/nisrulz/5">Buy me a Coffee</a>
            </li>
        
            <b>Contact Me ‚úâÔ∏è</b>
            <li class="nav-opened" role="presentation">
              <a href="mailto:nisrulz@gmail.com?Subject=Heyo%20CodeCrusher"> Mail</a>
            </li>
        
    </ul>

    
    <a class="subscribe-button icon-feed" href="http://crushingcode.github.io/index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">




<header class="main-header post-head no-cover">
  <nav class="main-nav clearfix">


  
      <a class="blog-logo" href="http://crushingcode.github.io/"><img src="http://crushingcode.github.io/images/author.jpg" alt="Home" /></a>
  
  
      <a class="menu-button" href="#"><span class="burger">&#9776;</span><span class="word">Menu</span></a>
  
  </nav>
</header>



<main class="content" role="main">




  <article class="post post">

    <header class="post-header">
        <h1 class="post-title">Do you like to ADB?</h1>
        <small></small>

        <section class="post-meta">
        
        
        
            
            
        

        
            Nishant Srivastava
        
          <time class="post-date" datetime="2016-10-14T10:54:24&#43;02:00">
            Oct 14, 2016
          </time>
        
         
          <span class="post-tag small"><a href="http://crushingcode.github.io/tags/android/">#android</a></span>
         
          <span class="post-tag small"><a href="http://crushingcode.github.io/tags/tools/">#tools</a></span>
         
          <span class="post-tag small"><a href="http://crushingcode.github.io/tags/apk/">#apk</a></span>
         
          <span class="post-tag small"><a href="http://crushingcode.github.io/tags/adb/">#adb</a></span>
         
          <span class="post-tag small"><a href="http://crushingcode.github.io/tags/information/">#information</a></span>
         
        </section>
    </header>

    <section class="post-content">
      <br/>
      

<p><img src="http://crushingcode.github.io/images/posts/doyouliketoadb/header.jpg" alt="header" /></p>

<p>Lets face it we all have been there , trying to fiddle with managing our emulators and dev devices. And at max we would do is try to manually manage it. Let me make this clear I am not talking about tests here as that&rsquo;s all related to the code. My focus here is on managing the device/emulator that&rsquo;s paired with your dev environment/system (..and to your IDE - Android Studio , if you still use Eclipse you are simply oblivious to the joys of coding in Android <em>[here is a long blank stare from me to you]</em> ).</p>

<p>Technically there is a tool called ADB (Android Debug Bridge) which maintains your connection with your device/emulator and the dev environment/system.</p>

<p>From the <a href="https://en.wikipedia.org/wiki/Android_software_development#ADB">wikipedia</a>, it&rsquo;s described as</p>

<blockquote>
<p><strong>adb</strong> is the command line tool provided in the Android SDK package. <strong>adb</strong> stands for Android Debug Bridge which allows you to communicate with an emulator instance or connected Android-powered device to:</p>

<ul>
<li>Manage the state of an emulator or device.</li>
<li>Run shell commands on a device.</li>
<li>Manage port forwarding on an emulator or device.</li>
<li>Copy files to/from an emulator or device.</li>
</ul>
</blockquote>

<p>Ohhk&hellip; that sounds something of use but not convincing enough for you to try and play with it yet. Let me try and put forward some of the problem as a dev you are facing everyday (..and yet no one admits to them whenever it comes up in a conversation üôÑ..) and how can we solve this.</p>

<hr />

<h3 id="uninstalling-an-app">Uninstalling an app</h3>

<p>Oh yeah ..you are used to hitting <strong>Run</strong> in the IDE (or the keyboard shortcut for the same) and BOOM the apk installs in the device. But what do you do to uninstall the apk ? <strong>[Rolling eyes]</strong> ohh yeah I know ..you will open up your device/emulator and manually uninstall the app by dragging it to the trash bin in the home screen and hit yes when prompted to uninstall it. Hard ain&rsquo;t it ? Yeah it is.</p>

<p>ADB can make it as simple as executing just a command</p>

<pre><code class="language-bash">adb uninstall &lt;package_name&gt;
</code></pre>

<p>if you wish to keep the data and cache directory intact but uninstall the app just add <code>-k</code> as an option to the command</p>

<pre><code class="language-bash">adb uninstall [-k] &lt;package_name&gt;
</code></pre>

<blockquote>
<p><code>[ ]</code> means its an optional parameter</p>
</blockquote>

<p>Of Course you can install an app too via</p>

<pre><code class="language-bash">adb install [-r] [-s] &lt;package_name&gt;
</code></pre>

<p>the options available to the command are</p>

<ul>
<li><code>-r</code> : reinstall the app, keeping its data</li>
<li><code>-s</code> : install on SD card instead of internal storage</li>
</ul>

<p>That looks neat.</p>

<hr />

<h3 id="direct-adb-commands-to-specific-devices-when-you-have-multiple-of-those-connected">Direct ADB commands to specific devices when you have multiple of those connected</h3>

<p>Ok this one is my favorite üôÉ</p>

<p>So here is the thing. You have like 5-6 devices connected to your dev environment and now you want to do some work with a specific device at a time. Piece of üç∞</p>

<p>Easy you say, right ? Like you can just fire up your Android Studio and execute the app in some specific device.</p>

<p>Not so early üòÖ. Let me complete. You want to execute commands in a certain order üôÑ ..yeah it isn&rsquo;t easy ar you thought before , eh ü§î</p>

<p>For our example here let&rsquo;s assume we have like 3 devices and 2 emulators running, named as <code>device_1</code>, <code>device_2</code>, <code>device_3</code>, <code>emu_1</code>, <code>emu_2</code>.</p>

<p>Our end goal is to be able to execute some adb command on the these devices/emulator in order such as</p>

<ul>
<li><code>emu_1</code></li>
<li><code>device_3</code></li>
<li><code>device_1</code></li>
<li><code>device_2</code></li>
<li><code>emu_2</code></li>
</ul>

<p>Cool ? Now first of all let me give you the magic commands to handle this situation. Lets look at what&rsquo;s available to us</p>

<pre><code class="language-bash">adb -d &lt;command&gt;
</code></pre>

<p>What this will do is it will directs command to the only connected USB device. Naice üôÇ</p>

<blockquote>
<p>You can also use <code>adb -e &lt;command&gt;</code> to directs command to the only connected Emulator</p>
</blockquote>

<p>But we wanna go a step ahead and orchestrate commands in a pattern (..by writing a bash script, obviously). But to do that I need to specifically direct commands to the device I want to control.</p>

<pre><code class="language-bash">adb -s &lt;device_id&gt; &lt;command&gt;
</code></pre>

<blockquote>
<p>Get the device id by using <code>adb devices</code></p>
</blockquote>

<p>Now we are talking üòé. Now the only thing I gotta do is create a bash script something like this</p>

<pre><code class="language-bash">#!/bin/bash

adb -s &lt;emu_1_id&gt; &lt;some_command&gt;
adb -s &lt;device_3_id&gt; &lt;some_command&gt;
adb -s &lt;device_1_id&gt; &lt;some_command&gt;
adb -s &lt;device_2_id&gt; &lt;some_command&gt;
adb -s &lt;emu_2_id&gt; &lt;some_command&gt;
</code></pre>

<blockquote>
<p>where <code>&lt;some_command&gt;</code> does not have to be the same.</p>
</blockquote>

<p>..and</p>

<ul>
<li>save it as <code>execute_cmds_as_symphony.sh</code></li>
<li>make it executable by running <code>chmod +x execute_cmds_as_symphony.sh</code></li>
<li>execute it by running <code>./execute_cmds_as_symphony.sh</code>.</li>
</ul>

<p>That&rsquo;s all there is. Everytime you wanna run it like this just run the bash script ü§ì üòé</p>

<p>That&rsquo;s like creating a symphony with your devices , except for the fact it&rsquo;s not ..gonna be a symphony in the first place. And its just code executingü§î But you get my point , rightüòÖ</p>

<hr />

<h3 id="connect-wirelessly-with-your-device">Connect wirelessly with your device</h3>

<p>Read my post <a href="http://crushingcode.github.io/life-without-wires-adb-over-wifi/">&ldquo;Life without wires : ADB over WiFi&rdquo;</a> to learn how to set it up.</p>

<hr />

<h3 id="device-does-not-show-up-in-the-android-studio-deploy-list">Device does not show up in the Android Studio deploy list</h3>

<p>There are times when the device would not show up in your IDE. Possible issue could be that adb is not responding.</p>

<p>To fix that simply kill the server and start it again.</p>

<pre><code class="language-bash"># Kill the server if it is running
adb kill-server 

# Start the server
adb start-server
</code></pre>

<blockquote>
<p>I have seen that you also need to uncheck and then check <strong>ADB Integration</strong> inside Android Studio as an extra step.</p>
</blockquote>

<p><img src="http://crushingcode.github.io/images/posts/doyouliketoadb/adbintegration.jpg" alt="adbintegration" /></p>

<hr />

<h3 id="to-get-device-information">To get Device Information</h3>

<pre><code class="language-bash"># Prints about the current state of the device : offline | bootloader | device
adb get-state

# Prints the serial number of the device
adb get-serialno

# Prints the device path
adb get-devpath 
</code></pre>

<hr />

<h3 id="copy-file-to-from-device-emulator">Copy file to/from device/emulator</h3>

<p>You can advocate about trying to copy files from your device by opening up some software and then dragging and dropping things onto your desktop. But I am fan of automating things and the above mentioned method is completely fine if you are doing that for one file and only once or twice.</p>

<p>It changes when you wanted to do the same task again and again. When you want to automate things <code>adb</code> commands come in handy. You can even add them to a script and run it every time one of the task completes.</p>

<p><strong>To push a file/dir to device</strong></p>

<pre><code class="language-bash">adb push &lt;local&gt; &lt;remote&gt;
</code></pre>

<p>where <code>&lt;local&gt;</code> is file in your local system i.e <code>my_image.png</code> and <code>&lt;remote&gt;</code> is file location in device/emulator i.e <code>/sdcard/Downloads/my_image.png</code></p>

<pre><code class="language-bash">adb push ~/Downloads/my_image.png /sdcard/Downloads/my_image.png
</code></pre>

<p><strong>To pull a file/dir from device</strong></p>

<pre><code class="language-bash">adb pull &lt;remote&gt; [&lt;local&gt;]
</code></pre>

<p>where <code>&lt;local&gt;</code> is file in your local system i.e <code>my_image.png</code> and <code>&lt;remote&gt;</code> is file location in device/emulator i.e <code>/sdcard/Downloads/my_image.png</code></p>

<pre><code class="language-bash">adb pull /sdcard/Downloads/my_image.png my_image.png
</code></pre>

<hr />

<h3 id="acting-as-a-developer-utility-belt">Acting as a Developer utility-belt</h3>

<p><strong>Generate Public/Private Key</strong></p>

<pre><code class="language-bash">adb keygen &lt;filename&gt;
</code></pre>

<blockquote>
<p>The private key is stored in <code>&lt;file&gt;</code>, and the public key is stored in <file>.pub.
Any existing files are overwritten.</p>
</blockquote>

<p><strong>Get a bug report</strong></p>

<pre><code class="language-bash"># Prints to the standard output
adb bugreport

# Writes to a file named bugreport.txt
adb bugreport &gt; bugreport.txt
</code></pre>

<p><strong>Get list of all connected devices</strong></p>

<pre><code class="language-bash">adb devices
</code></pre>

<h3 id="logging">Logging</h3>

<p>Of Course this is inbuilt into the IDE , but its worth knowing that it&rsquo;s not just a window which you use in Android Studio, but so much more.</p>

<p>Lets check out its power when used from terminal</p>

<pre><code class="language-bash"># Dumps log entries from 3 log buffers: main, events and radio
adb logcat

# Dumps log entries in long format
adb logcat -v long

# Dumps log entries into rotated log files on the device
adb logcat -f /sdcard/Download/Android.log -r 1024 -n 8

# Dumps only error log entries generated from the &quot;AndroidRuntime&quot; process, including Java exceptions
adb logcat AndroidRuntime:E *:S

# Clears (flushes) the entire log and exits
adb logcat -c

# Dumps the log to the screen and exits
adb logcat -d

# Writes log message output to a file. The default is the &quot;stdout - Standard Output&quot;
adb logcat -f &lt;filename&gt;

# Prints the size of the specified log buffer and exits
adb logcat -g
</code></pre>

<p><strong>Logcat Format</strong></p>

<p>To define the format of each log entry that is dumped , you need to set the output format for log messages</p>

<pre><code class="language-bash"># The default is brief format
adb logcat -v &lt;format&gt;

# Display priority/tag and the PID of process issuing the message (the default format)
adb logcat -v brief

# Display PID with the log info 
adb logcat -v process

# Display the raw log message, with no other metadata fields
adb logcat -v raw

# Display the date, invocation time, priority/tag, and PID of the process issuing the message
adb logcat -v time

# Display the priority, tag, and the PID and TID of the thread issuing the message
adb logcat -v thread

# Display the date, invocation time, priority, tag, and the PID and TID of the thread issuing the message
adb logcat -v threadtime

# Display all metadata fields and separate messages with a blank lines
adb logcat -v long
</code></pre>

<p><strong>Filter your log data</strong></p>

<p>A few people would say that we can always use <code>| grep &quot;filter_text&quot;</code> appended to the <code>adb logcat</code>. Well you are right you can , but there are some neat tricks hidden in the actual implementation of logcat and you should look at them too.</p>

<pre><code class="language-bash">adb logcat &lt;options&gt; &lt;process-tag&gt;:&lt;priority-code&gt;
</code></pre>

<blockquote>
<p>When filters are provided, the &ldquo;logcat&rdquo; command will dump log entries that are generated from specified processes with priorities higher than the specified code, plus all log entries that generated from unspecified processes.</p>

<p>A wildcard character, &ldquo;*&ldquo;, can be used to represent all processes</p>
</blockquote>

<p>List of all priority codes that can be used in the &ldquo;logcat&rdquo; command:</p>

<ul>
<li><code>V</code> - Verbose (lowest priority)</li>
<li><code>D</code> - Debug</li>
<li><code>I</code> - Info (default priority)</li>
<li><code>W</code> - Warning</li>
<li><code>E</code> - Error</li>
<li><code>F</code> - Fatal</li>
<li><code>S</code> - Silent (highest priority, on which nothing is ever printed)</li>
</ul>

<hr />

<h3 id="to-control-the-device">To control the device</h3>

<p>This is pretty well know to people who are into Modding their device. But for people who aren&rsquo;t going to mess with their device, here is what you can do with <strong>ADB</strong></p>

<pre><code class="language-bash"># Remounts the /system partition on the device read-write
adb remount

# Reboots the device, optionally into the bootloader or recovery program
adb reboot [bootloader|recovery]

# Reboots the device into the bootloader
adb reboot-bootloader

# Restarts the adbd daemon with root permissions
adb root

# Restarts the adbd daemon listening on USB
adb usb

# Restarts the adbd daemon listening on TCP on the specified port
adb tcpip &lt;port&gt;
</code></pre>

<hr />

<h3 id="some-other-base-functionality">Some other base functionality</h3>

<p>I am just going to list some more commands , just because well they exist! üòã</p>

<pre><code class="language-bash"># Show help about all commands for adb, check this to get info about more commands in adb
adb help

# Shows the version number for adb
adb version
</code></pre>

<p>Comment/Suggestions always welcome.</p>

<p>If you would like to get more of such android tips and tricks, just hop onto my <strong><a href="https://github.com/nisrulz/android-tips-tricks">Android Tips &amp; Tricks</a></strong> github repository. I keep updating it constantly.</p>

<p>Keep on crushing code!ü§ì üòÅ</p>

<p>P.S. : This post is also published on <a href="https://medium.com/@nisrulz/do-you-like-to-adb-fcae3655b9c8#.e4y1a7km5">medium.</a>
I would like to mention that <a href="https://twitter.com/pbreault">@pbreault</a> wrote a plugin for Android Studio and Intellij IDEA called <a href="https://plugins.jetbrains.com/plugin/7380">ADB Idea</a> <a href="https://github.com/pbreault/adb-idea">[Github]</a>, which allows you to do some of the common and straightforward interactions with ADB inside IntelliJ platform i.e Android Studio. Do check it out too üôÇ</p>

    </section>


  <footer class="post-footer">


    
    <figure class="author-image">
        <a class="img" href="http://crushingcode.github.io/" style="background-image: url(http://crushingcode.github.io/images/author.jpg)"><span class="hidden">Nishant Srivastava's Picture</span></a>
    </figure>
    

    





<section class="author">
  <h4><a href="http://crushingcode.github.io/">Nishant Srivastava</a></h4>
  
  <p>Creative sleeper. Avid dreamer.</p>
  
  <div class="author-meta">
    <span class="author-location icon-location">Gurgaon, India</span>
    <span class="author-link icon-link"><a href="https://about.me/nisrulz">https://about.me/nisrulz</a></span>
  </div>
</section>



    
<section class="share">
  <h4>Share this post</h4>
  <a class="icon-twitter" style="font-size: 1.4em" href="https://twitter.com/share?text=Do%20you%20like%20to%20ADB%3f&amp;url=http%3a%2f%2fcrushingcode.github.io%2fdo-you-like-to-adb%2f"
      onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
      <span class="hidden">Twitter</span>
  </a>
  <a class="icon-facebook" style="font-size: 1.4em" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fcrushingcode.github.io%2fdo-you-like-to-adb%2f"
      onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
      <span class="hidden">Facebook</span>
  </a>
  <a class="icon-google-plus" style="font-size: 1.4em" href="https://plus.google.com/share?url=http%3a%2f%2fcrushingcode.github.io%2fdo-you-like-to-adb%2f"
     onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
      <span class="hidden">Google+</span>
  </a>
</section>



    

<div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname = 'crushingcode';
  var disqus_url = 'http:\/\/crushingcode.github.io\/do-you-like-to-adb\/';
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>




  </footer>
</article>

</main>
    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">Crushing C.O.D.E</a> All rights reserved - 2015</section>
        
    </footer>
    </div>
    <script type="text/javascript" src="http://crushingcode.github.io/js/jquery.js"></script>
    <script type="text/javascript" src="http://crushingcode.github.io/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="http://crushingcode.github.io/js/index.js"></script>
    
</body>
</html>

